var Web3 = require('web3');
var web3 = new Web3();

web3.setProvider(new web3.providers.HttpProvider('http://localhost:8545'));

var c4_ABI = [{"constant":false,"inputs":[],"name":"initGame","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"player2","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"filled","outputs":[{"name":"","type":"uint8"}],"type":"function"},{"constant":false,"inputs":[{"name":"col","type":"uint8"}],"name":"move","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"p2","type":"address"}],"name":"setPlayer2","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"name":"board","outputs":[{"name":"","type":"uint8"}],"type":"function"},{"constant":true,"inputs":[],"name":"turn","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"player1","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[],"name":"winner","outputs":[{"name":"","type":"uint8"}],"type":"function"},{"constant":true,"inputs":[],"name":"end","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"p1","type":"address"}],"name":"setPlayer1","outputs":[{"name":"","type":"bool"}],"type":"function"},{"inputs":[],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"c4","type":"address"},{"indexed":false,"name":"player","type":"string"},{"indexed":false,"name":"col","type":"uint8"},{"indexed":false,"name":"row","type":"uint8"}],"name":"PlayerMoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"c4","type":"address"},{"indexed":true,"name":"nextPlayer","type":"address"},{"indexed":false,"name":"player","type":"string"}],"name":"newTurn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"c4","type":"address"},{"indexed":true,"name":"winner","type":"address"},{"indexed":false,"name":"player","type":"string"}],"name":"GameEnd","type":"event"}];
var c4_data = '60606040525b33600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506000600a60146101000a81548160ff021916908302179055506000600a60156101000a81548160ff021916908302179055506000600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506000600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506000600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b6123db806100f56000396000f3606060405236156100b6576000357c01000000000000000000000000000000000000000000000000000000009004806332eb2564146100b857806341c0e1b5146100db57806359a5f12d146100ea5780636f1a859a1461012357806370e87aaf1461015257806373da64a01461017e5780638086a92a146101aa5780638b299903146101e2578063d30895e41461021b578063dfbf53ae14610254578063efbe1c1c1461027a578063f88ac7241461029d576100b6565b005b6100c56004805050610505565b6040518082815260200191505060405180910390f35b6100e86004805050611641565b005b6100f7600480505061035d565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6101396004808035906020019091905050610309565b604051808260ff16815260200191505060405180910390f35b610168600480803590602001909190505061092f565b6040518082815260200191505060405180910390f35b610194600480803590602001909190505061046a565b6040518082815260200191505060405180910390f35b6101c960048080359060200190919080359060200190919050506102c9565b604051808260ff16815260200191505060405180910390f35b6101ef6004805050610383565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6102286004805050610337565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61026160048050506103bc565b604051808260ff16815260200191505060405180910390f35b61028760048050506103a9565b6040518082815260200191505060405180910390f35b6102b360048080359060200190919050506103cf565b6040518082815260200191505060405180910390f35b60006000508260078110156100025790900160005b50816006811015610002579090602091828204019190065b915091509054906101000a900460ff1681565b6007600050816007811015610002579090602091828204019190065b9150909054906101000a900460ff1681565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600a60149054906101000a900460ff1681565b600a60159054906101000a900460ff1681565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156104315760009050610465565b81600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555060019050610465565b919050565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156104cc5760009050610500565b81600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555060019050610500565b919050565b6000600060006000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561056d5760009350610929565b6000600a60146101000a81548160ff021916908302179055506000600a60156101000a81548160ff02191690830217905550600092505b60068360ff1611151561065b57600091505b60058260ff1611151561061957600060006000508460ff1660078110156100025790900160005b508360ff166006811015610002579090602091828204019190065b6101000a81548160ff021916908302179055505b81806001019250506105b6565b600060076000508460ff166007811015610002579090602091828204019190065b6101000a81548160ff021916908302179055505b82806001019350506105a4565b6000600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141580156106dd57506000600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614155b15610920576002426001430340600190040260ff1606905060008160ff16141561080e57600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690830217905550600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572310000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a3610917565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690830217905550600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572320000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b60019350610929565b60009350610929565b50505090565b6000600060006000600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156109975760009350611639565b6001600a60149054906101000a900460ff1614156109b85760009350611639565b60068560ff161115610bc157600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610afc57600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572310000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a3610bb8565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572320000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b60009350611639565b60076000508560ff166007811015610002579090602091828204019190065b9054906101000a900460ff16925060068360ff16101515610df857600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610d3357600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572310000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a3610def565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572320000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b60009350611639565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610fa257600160006000508660ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b6101000a81548160ff021916908302179055503073ffffffffffffffffffffffffffffffffffffffff167fa8bd85da5d7f3d59990fa98e58ffed6e9aa6e58cc8655d7bd0ac8e62c83cd7cb868560405180806020018460ff1681526020018360ff168152602001828103825260078152602001807f506c617965723100000000000000000000000000000000000000000000000000815260200150602001935050505060405180910390a2600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055506110d0565b600260006000508660ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b6101000a81548160ff021916908302179055503073ffffffffffffffffffffffffffffffffffffffff167fa8bd85da5d7f3d59990fa98e58ffed6e9aa6e58cc8655d7bd0ac8e62c83cd7cb868560405180806020018460ff1681526020018360ff168152602001828103825260078152602001807f506c617965723200000000000000000000000000000000000000000000000000815260200150602001935050505060405180910390a2600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b6001830160076000508660ff166007811015610002579090602091828204019190065b6101000a81548160ff0219169083021790555061111085846116d5565b600a60156101000a81548160ff021916908302179055506000600a60159054906101000a900460ff1660ff16141515611313576001600a60146101000a81548160ff021916908302179055506001600a60159054906101000a900460ff1660ff16141561123357600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f67e639336cb038d01b3aaf639d75a7d3c315d7936a3ea6ec6c86cbd2afbd6ed16040518080602001828103825260078152602001807f506c61796572310000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b6002600a60159054906101000a900460ff1660ff16141561130a57600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f67e639336cb038d01b3aaf639d75a7d3c315d7936a3ea6ec6c86cbd2afbd6ed16040518080602001828103825260078152602001807f506c61796572320000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b60019350611639565b60019150600090505b60078160ff16101561137757600660076000508260ff166007811015610002579090602091828204019190065b9054906101000a900460ff1660ff16101561136957600091508150611377565b5b808060010191505061131c565b811561143c576001600a60146101000a81548160ff0219169083021790555060003073ffffffffffffffffffffffffffffffffffffffff167f67e639336cb038d01b3aaf639d75a7d3c315d7936a3ea6ec6c86cbd2afbd6ed16040518080602001828103825260038152602001807f546965000000000000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a36000600a60156101000a81548160ff0219169083021790555060019350611639565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561157457600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572310000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a3611630565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f9d4832f1fb3be975fbddc6ed8fb989b20d9794c14281eb6bb095fdd3d03d68436040518080602001828103825260078152602001807f506c61796572320000000000000000000000000000000000000000000000000081526020015060200191505060405180910390a35b60019350611639565b505050919050565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614156116d257600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b6000600060068460ff1611806116ee575060058360ff16115b156116fc576000915061176e565b6117068484611df5565b9050805060008160ff1614151561171f5780915061176e565b61172984846120e8565b9050805060008160ff161415156117425780915061176e565b61174c8484611775565b9050805060008160ff161415156117655780915061176e565b6000915061176e565b5092915050565b60006000600083600503905060038160ff161115611794576003905080505b6000915081505b8060ff168260ff16111515611abc578160ff168560ff1610156117bd57611aaf565b600382850160ff1610156117d057611aaf565b600382860360ff1611156117e357611aaf565b600582850160ff1611156117f657611aaf565b6001600060005083870360ff1660078110156100025790900160005b5083860160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff1614801561189657506001600060005060018488030160ff1660078110156100025790900160005b5060018487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b80156118ed57506001600060005060028488030160ff1660078110156100025790900160005b5060028487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b801561194457506001600060005060038488030160ff1660078110156100025790900160005b5060038487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b156119525760019250611ded565b6002600060005083870360ff1660078110156100025790900160005b5083860160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff161480156119f257506002600060005060018488030160ff1660078110156100025790900160005b5060018487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611a4957506002600060005060028488030160ff1660078110156100025790900160005b5060028487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611aa057506002600060005060038488030160ff1660078110156100025790900160005b5060038487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b15611aae5760029250611ded565b5b818060010192505061179b565b6000915081505b8060ff168260ff16111515611de457600682860160ff161115611ae557611dd7565b600682850160ff161115611af857611dd7565b600382860160ff161015611b0b57611dd7565b600382850160ff161015611b1e57611dd7565b6001600060005083870160ff1660078110156100025790900160005b5083860160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16148015611bbe57506001600060005060018488010360ff1660078110156100025790900160005b5060018487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611c1557506001600060005060028488010360ff1660078110156100025790900160005b5060028487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611c6c57506001600060005060038488010360ff1660078110156100025790900160005b5060038487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b15611c7a5760019250611ded565b6002600060005083870160ff1660078110156100025790900160005b5083860160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16148015611d1a57506002600060005060018488010360ff1660078110156100025790900160005b5060018487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611d7157506002600060005060028488010360ff1660078110156100025790900160005b5060028487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611dc857506002600060005060038488010360ff1660078110156100025790900160005b5060038487010360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b15611dd65760029250611ded565b5b8180600101925050611ac3565b60009250611ded565b505092915050565b60006000600090505b60038160ff161115156120d8578360ff168160ff161115611e1e576120cb565b600660038286030160ff161115611e34576120cb565b6001600060005082860360ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16148015611ecd57506001600060005060018387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611f1f57506001600060005060028387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b8015611f7157506001600060005060038387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b15611f7f57600191506120e1565b6002600060005082860360ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff1614801561201857506002600060005060018387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b801561206a57506002600060005060028387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b80156120bc57506002600060005060038387030160ff1660078110156100025790900160005b508460ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b156120ca57600291506120e1565b5b8080600101915050611dfe565b600091506120e1565b5092915050565b60006000600090505b60038160ff161115156123cb578260ff168160ff161115612111576123be565b600560038285030160ff161115612127576123be565b600160006000508560ff1660078110156100025790900160005b5082850360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff161480156121c05750600160006000508560ff1660078110156100025790900160005b5060018386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b80156122125750600160006000508560ff1660078110156100025790900160005b5060028386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b80156122645750600160006000508560ff1660078110156100025790900160005b5060038386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b1561227257600191506123d4565b600260006000508560ff1660078110156100025790900160005b5082850360ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff1614801561230b5750600260006000508560ff1660078110156100025790900160005b5060018386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b801561235d5750600260006000508560ff1660078110156100025790900160005b5060028386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b80156123af5750600260006000508560ff1660078110156100025790900160005b5060038386030160ff166006811015610002579090602091828204019190065b9054906101000a900460ff1660ff16145b156123bd57600291506123d4565b5b80806001019150506120f1565b600091506123d4565b509291505056';

/* Deploy c4 board */
var connect4Contract = web3.eth.contract(c4_ABI);
var connect4 = connect4Contract.new(
   {
     from: web3.eth.accounts[0], 
     data: c4_data, 
     gas: 999999999
   }, function(e, c4){

    if (typeof c4.address != 'undefined') {
         console.log('[C4 contract mined] Address: ' + c4.address);
     }
 })